<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Transformacion Plantas</title>
    </h:head>
    <h:body>
        <ui:composition template="../index.xhtml">
            <ui:define name="content">
                <p:messages showDetail="true" showSummary="true">
                    <p:autoUpdate></p:autoUpdate>
                </p:messages>

                <h:panelGrid columns="1" id="panelCentral" style="width: 100%">
                    <p:panel header="Listado de Controles de tranformación de Plantas" rendered="#{transPlantaManagedBean.procesamientoPlanta==null}">
                        <p:commandButton value="Nuevo" icon="ui-icon-plus" action="#{transPlantaManagedBean.nuevo()}" update="panelCentral"></p:commandButton>
                        <br/>
                        <p:dataTable id="dtPlantas" value="#{transPlantaManagedBean.listaProcesamientoPlantas}" var="transplan" paginator="true" rows="5">
                            <p:column headerText="NÚMERO DE PROCESAMIENTO" style="text-align: center" sortBy="#{transplan.procesamientoPlantaPK.numeroProcesamiento}" filterBy="#{transplan.procesamientoPlantaPK.numeroProcesamiento}" filterMatchMode="contains" width="100">
                                <h:outputLabel value="#{transplan.procesamientoPlantaPK.numeroProcesamiento}"></h:outputLabel>
                            </p:column>

                            <p:column headerText="FECHA DE INGRESO" style="text-align: center" sortBy="#{transplan.procesamientoPlantaPK.fecha}" filterBy="#{transplan.procesamientoPlantaPK.fecha}" filterMatchMode="contains">
                                <h:outputLabel value="#{transplan.procesamientoPlantaPK.fecha}" style="text-transform: uppercase">
                                    <f:convertDateTime pattern="dd/MMM/YYYY"></f:convertDateTime>
                                </h:outputLabel>
                            </p:column>

                            <p:column headerText="ID PLANTA" style="text-align: center" sortBy="#{transplan.plantas.plantasPK.idPlanta}" filterBy="#{transplan.plantas.plantasPK.idPlanta}" filterMatchMode="contains" width="100">
                                <h:outputLabel value="#{transplan.plantas.plantasPK.idPlanta}"></h:outputLabel>
                            </p:column>

                            <p:column headerText="NOMBRE CIENTÍFICO" style="text-align: center" sortBy="#{transplan.plantas.plantasPK.nombreCientifico}" filterBy="#{transplan.plantas.plantasPK.nombreCientifico}" filterMatchMode="contains" width="100">
                                <h:outputLabel value="#{transplan.plantas.plantasPK.nombreCientifico}"></h:outputLabel>
                            </p:column>

                            <p:column headerText="CÓDIGO DEL PRODUCTO" style="text-align: center" sortBy="#{transplan.procesamientoPlantaPK.codProducto}" filterBy="#{transplan.procesamientoPlantaPK.codProducto}" filterMatchMode="contains" width="100">
                                <h:outputLabel value="#{transplan.procesamientoPlantaPK.codProducto}"></h:outputLabel>
                            </p:column>

                            <p:column headerText="MORTAL" style="text-align: center" sortBy="#{transplan.mortal}" filterBy="#{transplan.mortal}" filterMatchMode="contains" width="80">
                                <h:outputLabel value="#{transplan.mortal == 1 ?'Verdadero':'Falso'}"></h:outputLabel>
                            </p:column>

                            <p:column headerText="CANTIDAD" style="text-align: center" sortBy="#{transplan.cantidad}" filterBy="#{transplan.cantidad}" filterMatchMode="contains" width="100">
                                <h:outputLabel value="#{transplan.cantidad}"></h:outputLabel>
                            </p:column>

                            <p:column headerText="UNIDAD" style="text-align: center" sortBy="#{transplan.unidad}" filterBy="#{transplan.unidad}" filterMatchMode="contains" width="100">
                                <h:outputLabel value="#{transplan.unidad}"></h:outputLabel>
                            </p:column>

                            <p:column headerText="FECHA DE CADUCIDAD" style="text-align: center" sortBy="#{transplan.fechaCaducidad}" filterBy="#{transplan.fechaCaducidad}" filterMatchMode="contains">
                                <h:outputLabel value="#{transplan.fechaCaducidad}" style="text-transform: uppercase">
                                    <f:convertDateTime pattern="dd/MMM/YYYY"></f:convertDateTime>
                                </h:outputLabel>
                            </p:column>

                            <p:column headerText="EDITAR" style="text-align: center" width="80">
                                <p:commandButton icon="ui-icon-pencil" action="#{transPlantaManagedBean.seleccionar(transplan)}" update=":form1:panelCentral"></p:commandButton>
                            </p:column>

                            <p:column headerText="ELIMINAR" style="text-align: center" width="80">
                                <p:commandButton icon="ui-icon-trash" action="#{transPlantaManagedBean.eliminar(transplan)}" update="dtPlantas">
                                    <p:confirm header="Confirmación" message="¿Está seguro que desea eliminar el elemento?"></p:confirm>
                                </p:commandButton>
                            </p:column>
                        </p:dataTable>
                    </p:panel>

                    <p:panel header="#{transPlantaManagedBean.esNuevo ? 'Ingreso ' : 'Modificación'} de Control de Transformación de Plantas" rendered="#{transPlantaManagedBean.procesamientoPlanta!=null}">
                        <h:panelGrid columns="3">
                            <p:outputLabel for="numProcesamiento" value="Número de Pocesamiento: "></p:outputLabel>
                            <p:inputNumber id="numProcesamiento" value="#{transPlantaManagedBean.procesamientoPlanta.procesamientoPlantaPK.numeroProcesamiento}" decimalPlaces="0" minValue="1" required="true" requiredMessage="Campo Obligatorio"></p:inputNumber>
                            <p:message for="numProcesamiento"></p:message>
                            
                            <p:outputLabel for="comIDPlanta" value="ID de Planta: "></p:outputLabel>
                            <p:selectOneMenu id="comIDPlanta" value="#{transPlantaManagedBean.procesamientoPlanta.plantas.plantasPK}" converter="omnifaces.SelectItemsConverter" required="true" requiredMessage="Campo Obligatorio">
                                <f:selectItems value="#{transPlantaManagedBean.listaPlantas}" var="listid" itemLabel="#{listid.plantasPK.idPlanta}" itemValue="#{listid.plantasPK}"></f:selectItems>
                            </p:selectOneMenu>
                            <p:message for="comIDPlanta"></p:message>
                            
                            <p:outputLabel for="comNomCient" value="Nombre Científico de Planta: "></p:outputLabel>
                            <p:selectOneMenu id="comNomCient" value="#{transPlantaManagedBean.procesamientoPlanta.plantas.plantasPK.nombreCientifico}" converter="omnifaces.SelectItemsConverter" required="true" requiredMessage="Campo Obligatorio">
                                <f:selectItems value="#{transPlantaManagedBean.listaPlantas}" var="listnom" itemLabel="#{listnom.plantasPK.nombreCientifico}" itemValue="#{listnom}"></f:selectItems>
                            </p:selectOneMenu>
                            <p:message for="comNomCient"></p:message>
                            
                            <p:outputLabel for="comCodProd" value="Tipo de producto a fabricar: "></p:outputLabel>
                            <p:selectOneMenu id="comCodProd" value="#{transPlantaManagedBean.procesamientoPlanta.productos.codProducto}" converter="omnifaces.SelectItemsConverter" required="true" requiredMessage="Campo Obligatorio">
                                <f:selectItems value="#{transPlantaManagedBean.listaProductos}" var="list" itemLabel="#{list.nombre}" itemValue="#{list}"></f:selectItems>
                            </p:selectOneMenu>
                            <p:message for="comCodProd"></p:message>
                            
                            <p:outputLabel for="numMortal" value="Proceso Mortal?: "></p:outputLabel>
                            <p:inputNumber id="numMortal" value="#{transPlantaManagedBean.procesamientoPlanta.mortal}" decimalPlaces="0" minValue="0" maxValue="1" required="true" requiredMessage="Campo Obligatorio"></p:inputNumber>
                            <p:message for="numMortal"></p:message>
                            
                            <p:outputLabel for="numCantidad" value="Cantidad: "></p:outputLabel>
                            <p:inputNumber id="numCantidad" value="#{transPlantaManagedBean.procesamientoPlanta.cantidad}" decimalPlaces="0" minValue="1" required="true" requiredMessage="Campo Obligatorio"></p:inputNumber>
                            <p:message for="numCantidad"></p:message>
                            
                            <p:outputLabel for="txtUnidad" value="Unidad de Medida: "></p:outputLabel>
                            <p:inputText id="txtUnidad" value="#{transPlantaManagedBean.procesamientoPlanta.unidad}" required="true" requiredMessage="Campo Obligatorio"></p:inputText>
                            <p:message for="txtUnidad"></p:message>
                            
                            <p:outputLabel for="calFecha" value="Fecha de Caducidad: "></p:outputLabel>
                            <p:calendar id="calFecha" value="#{transPlantaManagedBean.procesamientoPlanta.fechaCaducidad}" required="true" requiredMessage="Campo Obligatorio"></p:calendar>
                            <p:message for="calFecha"></p:message>
                        </h:panelGrid>

                        <h:panelGrid columns="2">
                            <p:commandButton value="Grabar" action="#{transPlantaManagedBean.grabar()}" update="panelCentral"></p:commandButton>
                            <p:commandButton value="Cancelar" action="#{transPlantaManagedBean.cancelar()}" update="panelCentral" immediate="true"></p:commandButton>
                        </h:panelGrid>
                    </p:panel>
                </h:panelGrid>
            </ui:define>
        </ui:composition>
    </h:body>
</html>
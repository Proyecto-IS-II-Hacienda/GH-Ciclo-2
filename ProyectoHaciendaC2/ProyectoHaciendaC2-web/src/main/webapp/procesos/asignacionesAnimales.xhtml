<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        <h:form >
             <p:messages showDetail="true" showSummary="true">
                    <p:autoUpdate></p:autoUpdate>
                </p:messages>
                <h:panelGrid id="panelCentral">
                    <p:panel header="Listado de asignaciones" rendered="#{asignacionesManagedBean!=null}">
                        <p:outputLabel for="selEstado" value="Se asignará: "></p:outputLabel> 
                        <p:selectOneRadio id="selEstado" value="#{asignacionesManagedBean.seleccion}" required="true">
                            <f:selectItem itemLabel="Animal" itemValue="true"></f:selectItem>
                            <f:selectItem itemLabel="Planta" itemValue="false"></f:selectItem>
                        </p:selectOneRadio>
                        <p:message for="selEstado" ></p:message>
                        <p:commandButton value="Nuevo" icon="ui-icon-plus" action="#{asignacionesManagedBean.nuevo()}" update="panelCentral"></p:commandButton>
                        <p:dataTable id="dtAreas" value="#{asignacionesManagedBean.distribucionesAnimalesList}" var="asig" paginator="true" rows="10">
                            <p:column headerText="Fecha de Asignacion" style="width: auto;" sortBy="#{asig.fechaAsignacion}" filterBy="#{asig.fechaAsignacion}" filterMatchMode="contains">
                                <h:outputLabel value="#{asig.fechaAsignacion}"></h:outputLabel>
                            </p:column>
                            <p:column headerText="Fecha de Salida" style="width: auto;" sortBy="#{asig.fechaSalida}" filterBy="#{asig.fechaSalida}" filterMatchMode="contains">
                                <h:outputLabel value="#{asig.fechaSalida}"></h:outputLabel>
                            </p:column>
                            <p:column headerText="Descripción de uso" style="width: auto;" sortBy="#{asig.descripcionUso}" filterBy="#{asig.descripcionUso}" filterMatchMode="contains">
                                <h:outputLabel value="#{asig.descripcionUso}"></h:outputLabel>
                            </p:column>
                        </p:dataTable>
                    </p:panel>



                    <p:panel header="#{asignacionesManagedBean.esNuevo? 'Ingreso': 'Edicion'} de asignación" rendered="#{asignacionesManagedBean.distribucionAnimal!=null}">
                        <h:panelGrid columns="3">
                            <p:outputLabel for="calAsignacion" value="Fecha de Asignacion: "></p:outputLabel>
                            <p:calendar id="calAsignacion" value="#{asignacionesManagedBean.distribucionAnimal.fechaAsignacion}" required="true" requiredMessage="Campo obligatorio"></p:calendar>
                            <p:message for="calAsignacion"></p:message>
                            <p:outputLabel for="calSalida" value="Fecha de Salida: "></p:outputLabel>
                            <p:calendar id="calSalida" value="#{asignacionesManagedBean.distribucionAnimal.fechaSalida}" required="true" requiredMessage="Campo obligatorio"></p:calendar>
                            <p:message for="calSalida"></p:message>
                            <p:outputLabel for="txtDescripcion" value="Descripcion de uso: "></p:outputLabel>
                            <p:inputText id="txtDescripcion" value="#{asignacionesManagedBean.distribucionAnimal.descripcionUso}" required="true" requiredMessage="Campo obligatorio"></p:inputText>
                            <p:message for="txtDescripcion"></p:message>

                            <h:panelGrid columns="3">
                                <p:outputLabel value="Area"></p:outputLabel>
                                <p:commandButton icon="ui-icon-search" action="#{asignacionesManagedBean.abrirBusquedaArea()}">
                                    <p:ajax event="dialogReturn" listener="#{asignacionesManagedBean.recibirArea}" update="panelArea"></p:ajax>
                                </p:commandButton>
                            </h:panelGrid>

                            <h:panelGrid id="panelArea" columns="2">
                                <p:outputLabel value="Número de area"></p:outputLabel>
                                <p:outputLabel value="#{asignacionesManagedBean.distribucionAnimal.areas.areasPK.numeroArea}"></p:outputLabel>
                                <p:outputLabel value="Tipo de area"></p:outputLabel>
                                <p:outputLabel value="#{asignacionesManagedBean.distribucionAnimal.areas.areasPK.idTipoArea}"></p:outputLabel>
                                <p:outputLabel value="Area"></p:outputLabel>
                                <p:outputLabel value="#{asignacionesManagedBean.distribucionAnimal.areas.area}"></p:outputLabel>
                                <p:outputLabel value="Cercado"></p:outputLabel>
                                <p:outputLabel value="#{asignacionesManagedBean.distribucionAnimal.areas.cercado}"></p:outputLabel>
                                <p:outputLabel value="Tipo de suelo"></p:outputLabel>
                                <p:outputLabel value="#{asignacionesManagedBean.distribucionAnimal.areas.tipoSuelo}"></p:outputLabel>
                                <p:outputLabel value="Agua"></p:outputLabel>
                                <p:outputLabel value="#{asignacionesManagedBean.distribucionAnimal.areas.agua}"></p:outputLabel>
                                <p:outputLabel value="Disponible"></p:outputLabel>
                                <p:outputLabel value="#{asignacionesManagedBean.distribucionAnimal.areas.disponible}"></p:outputLabel>
                            </h:panelGrid>

                            <h:panelGrid columns="3">
                                <p:outputLabel value="Animal"></p:outputLabel>
                                <p:commandButton icon="ui-icon-search" action="#{asignacionesManagedBean.abrirBusquedaAnimal()}">
                                    <p:ajax event="dialogReturn" listener="#{asignacionesManagedBean.recibirAnimal}" update="panelAnimal"></p:ajax>
                                </p:commandButton>
                            </h:panelGrid>
                            
                            <h:panelGrid id="panelAnimal" columns="2">
                                <p:outputLabel value="ID del animal"></p:outputLabel>
                                <p:outputLabel value="#{asignacionesManagedBean.distribucionAnimal.animales.animalesPK.idAnimal}"></p:outputLabel>
                                <p:outputLabel value="Nombre cientifico"></p:outputLabel>
                                <p:outputLabel value="#{asignacionesManagedBean.distribucionAnimal.animales.animalesPK.nombreCientifico}"></p:outputLabel>
                                <p:outputLabel value="Nombre comun"></p:outputLabel>
                                <p:outputLabel value="#{asignacionesManagedBean.distribucionAnimal.animales.tiposDeAnimales.tiposDeAnimalesPK.nombreComun}"></p:outputLabel>
                            </h:panelGrid>
                        </h:panelGrid>
                        <h:panelGrid columns="2">
                            <p:commandButton value="Grabar" action="#{asignacionesManagedBean.grabar()}" update="panelCentral" ></p:commandButton>
                            <p:commandButton value="Cancelar" action="#{asignacionesManagedBean.cancelar()}" update="panelCentral" immediate="true"></p:commandButton>
                        </h:panelGrid>
                    </p:panel>
                </h:panelGrid>
        </h:form>

               


    </h:body>
</html>

